---
title: 《操作系统》第1讲：“操作系统概述”总结
date: 2018-04-08 00:00:55
updated: 2018-04-08 00:00:55
tags: [OS]
toc: true
urlname: os-mooc-lecture-1-summary
---

## 课程内容概述

这一讲对课程内容和操作系统做了一个概括性的介绍，主要包括以下几块内容：
* 教学安排
* 什么是操作系统
* 操作系统的演变
* 操作系统结构的分类

### 教学安排
本课程将讲述的内容包括：
* 操作系统结构
* 中断和系统调用
* 内存管理
* 进程和线程
* 处理机调度
* 同步互斥
* 文件系统
* I/O子系统

实验共有8个，包括：
* 0：实验环境准备
* 1：系统启动及中断
* 2：物理内存管理
* 3：虚拟内存管理
* 4：内核线程管理
* 5：用户进程管理
* 6：CPU调度
* 7：同步与互斥
* 8：文件系统

实验安排与教学安排是基本匹配的。

### 什么是操作系统
操作系统可以是：
* 一个控制程序
* 一个资源管理器
* 一套标准库

操作系统通常由内核、命令行和GUI组成。我们研究的主要是内核。以uCore为例，可以分成以下4个层次：
* 应用程序
* 命令行程序、编译器、解释器、系统库
* 内核
  * 内核向上提供系统调用接口
  * 同时调用下层提供的硬件抽象
* 硬件设备

操作系统内核的特征：
* 并发：OS需要管理和调度多个同时运行的程序
* 共享：对资源的互斥共享
* 虚拟：对CPU和内存资源的虚拟化
* 异步：程序的运行是时常会停止的，OS需要保证程序暂停之后状态不变

### 操作系统的演变
* 单用户系统：1945-1955
  * OS=装载器+通用子程序库
  * 问题是，任务完全为串行执行，由于读卡时间过长，执行时间比例降低
* 批处理系统：1955-1965
  * 每个任务在每个组件中串行执行，总体看来是并行执行的
  * 解决了利用率问题
* 多道程序系统：1965-1980
  * 将多个程序存储在内存中，复用CPU
  * 在程序进行I/O操作时将其阻塞，切换到别的程序
* 分时系统：1970-
  * 定时中断当前程序，实现对CPU的复用
* 个人电脑操作系统
* 分布式操作系统
* ……

### 操作系统结构的分类
操作系统的结构可以分为以下几种：
* 简单结构：没有拆分为模块，没有很好地分离接口和功能
  * 应用程序可以直接访问最底层的服务，也可以使用操作系统的服务
  * 例：MS-DOS
* 分层结构：将操作系统分为多层，每层建立在底层上
  * 优点：可移植性强
  * 缺点：层次过多会导致效率降低
  * 例：UNIX
* 微内核结构：将一些内核服务移动到用户态，内核只保留进程通信和硬件支持功能
  * 优点：灵活，安全
  * 缺点：性能差
  * 例：目前的系统结构是微内核结构和分层结构的混合体
* 外核结构：内核只起到资源的保护和隔离功能，操作系统原有功能由用户态操作系统库支持
* 虚拟机结构：操作系统与虚拟机管理器交互，虚拟机管理器负责和硬件交互

## 习题

来自[操作系统概述](https://github.com/chyyuu/os_course_exercises/blob/2018spring/all/01-2-spoc-discussion.md)。

### 选择填空题

---
* 当前常见的操作系统主要用**C，C++，ASM编程语言**编写。

---
* "Operating system"这个单词起源于**Operator**。

指的是原来的系统操作员。

---
* 在计算机系统中，控制和管理各种资源、有效地组织多道程序运行的系统软件称作**操作系统**。

对操作系统定义的考察。当然我觉得这个答案并不全面，加上“提供了一套标准库”（也就是系统调用）会更好。

---
* 允许多用户将若干个作业提交给计算机系统集中处理的操作系统称为**批处理**操作系统。

这说明单用户系统是每个任务手动提交上去的。

---
* 你了解的当前世界上使用最多的32bit CPU是**ARM**，其上运行最多的操作系统是**Android**。

答案如此，没有找到信源。不过知道这个也没什么意义。

---
* 应用程序通过**系统调用**接口获得操作系统的服务。

系统调用是非常重要的。这是应用程序主动进入内核态的方式。

---
* 现代操作系统的特征包括**并发性，共享性，虚拟性，异步性，持久性**。

特征到底应该包括哪些也是见仁见智。OSTEP中总结出的三点是虚拟，并发和持久性。异步性和共享性大概可以归入并发性。同时我也觉得持久性未必是操作系统的特点，而是存储设备的特点。当然这也可能是我的理解不够。

UPD：操作系统本身也是需要从持久性存储设备中读入的。文件系统也是OS的重要组成成分。所以我想得可能太片面了。

---
* 操作系统内核的架构包括**宏内核，微内核，外核**。

这个答案和上面讲的并不相符。那么，当然应该填简单结构、分层结构、微内核结构、外核结构和虚拟机结构了。

### 简答题
**请总结你认为操作系统应该具有的特征有什么？并对其特征进行简要阐述。**

操作系统应该具有的特征有：虚拟性、并发性、异步性、共享性和持久性。

* 虚拟性：虚拟是指把一个物理上的实体变为若干个逻辑上的对应物。在操作系统中利用了多种虚拟技术，分别用来实现虚拟处理器、虚拟内存和虚拟外部设备。
* 并发性：并发是指两个或多个事件在同一时间间隔内发生，在多道程序环境下，一段时间内宏观上有多个程序在同时执行，而在同一时刻，单处理器环境下实际上只有一个程序在执行，故微观上这些程序还是在分时的交替进行。操作系统的并发是通过分时得以实现的。操作系统的并发性是指计算机系统中同时存在多个运行着的程序，因此它具有处理和调度多个程序同时执行的能力。
* 异步性：在多道程序环境下，允许多个程序并发执行，但由于资源有限，进程的执行不是一贯到底，而是走走停停，以不可预知的速度向前推进，这就是进程的异步性。异步性使得操作系统运行在一种随机的环境下，可能导致进程产生于时间有关的错误。但是只要运行环境相同，操作系统必须保证多次运行进程，都获得相同的结果。
* 共享性：系统中的资源可供内存中多个并发执行的进程共同使用。（事实上，只能做到互斥共享，或者说同时。）
* 持久性：通过实现文件系统，操作系统可以将程序以及数据存储在磁盘等存储介质中。 详细解释可以参考操作系统的特征。

---

**为什么现在的操作系统基本上用C语言来实现？为什么没有人用python，java来实现操作系统？**

C语言是编译型语言，有良好的性能，能够直接嵌入汇编，可以方便地操作硬件；Python，Java无法保证性能，不能直接操作硬件。

不过，仍然是有人用这些语言来编写操作系统的，比如：
* 用Java实现的操作系统：[JavaOS](https://en.wikipedia.org/wiki/JavaOS)
* 用Python实现的操作系统：[pycorn](https://github.com/tornewuff/pycorn)，[pythonix](https://github.com/wfxpanisa/pythonix)
* 用Rust实现的操作系统：[Redox](https://www.redox-os.org/)

### 实践题
此次的实践题全部与V9-computer相关，和本课程关系不大，所以先不做了。
