---
title: 2017年清华大学保研机试第2题：扫雷（模拟）
urlname: 2017-thupub-2-mine
toc: true
date: 2018-12-08 21:04:12
updated: 2018-12-08 21:04:12
tags: [alg:Breadth-first Search]
---

## 题意

这道题的题意还挺复杂的。

要求写一个扫雷模拟程序。

首先，游戏（未失败）过程中方块可能有三种状态：

* 未探明：既没有插旗，也没有点开的方块
* 已插旗：就是插了旗子的方块
* 已探明：已经点开的方块

在游戏中需要实现以下四种操作：

* Flag：插上/撤销一面旗帜，可能输出结果为swept/success/cancelled
* Sweep：对方块进行**扫雷**，可能输出结果为swept/flagged/**扫雷结果**
* DSweep：对已探明方块八连通的未探明方块进行**扫雷**，可能输出结果为not swept/failed/**扫雷结果**
* Quit：放弃并退出

其中**扫雷**操作是一种递归操作。对(x, y)进行扫雷的步骤是这样的：

* 首先判断(x, y)是否为地雷，如果是，则扫雷失败，输出boom，并结束游戏
* 否则标记(x, y)为已探明，令它显示相邻方块的地雷总数
* 如果相邻方块中没有地雷（显示总数为0），则自动对相邻的未探明和已插旗方块进行扫雷（先清除旗帜信息）
* 扫雷（全部）结束后输出新探明的方块总数，以及它们的信息

游戏有三种可能的结果：

* 游戏胜利：所有没有地雷的方块均被探明，输出finish
* 扫雷失败：扫雷过程中踩到雷，输出game over
* 退出游戏：因为Quit操作而退出，输出give up

如果输入的操作为Quit，则立即退出游戏，游戏结束；在其余每一次操作结束的时候，都应该检查是否游戏胜利或扫雷失败，如果发生，也立刻结束游戏。

最后还要输出行动次数。

## 分析

直接模拟。

<!--
### 50分代码

这个要不要放还是一回事。

还是不要放了。-->

### 95分代码

DFS过不了最后一个点。cin/cout也是。

代码施工中……

### 100分代码

代码施工中……

我在自己的机子上跑不到满分（最后一个测试点大约1400ms），但标程也跑不到，所以不妨认为在标准测试环境下是能满分的。