---
title: OSTEP第25章总结：A Dialogue on Currency
urlname: ostep-ch-25-summary-a-dialogue-on-currency
toc: true
date: 2018-04-16 11:08:53
tags: [操作系统, OSTEP]
---

这一章是**并发**部分的开头，是一篇只有两页的对话，对并发中可能出现的问题进行了简单的讨论，所以并没有太多可以总结的。**教授**再一次拿出了桃子作为比喻的工具。

不妨想象桌子上有很多桃子，很多人想要吃它们。他们的动作步骤是这样的：
* 用眼神确认一个桃子
* 尝试伸手抓住桃子
* 吃
这一过程的问题是，两个人可能同时看到一个桃子，而后伸手的人就没有桃子了。

**学生**给出的解决方案是，将人排成一队，按顺序拿桃子，但**教授**指出这样太慢了。

在**多线程应用**中，每个线程就是吃桃子的人，而资源就是桃子。因为多线程资源访问冲突的问题，OS需要管理线程对资源的请求。

**学生**提问，为何不仅仅在用户态下实现多线程。对此，**教授**的回答是：
1. OS必须通过提供锁（lock）和条件变量（condition variable）来支持多线程应用
2. OS本身就是一个多线程的应用，需要控制自己对资源的访问

很好，我很期待接下来的内容。
